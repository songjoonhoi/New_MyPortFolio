<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>프로젝트 수정</title>
    <link rel="stylesheet" href="/css/edit.css">
</head>
<body>
    <div class="container admin-container">
        <h1>프로젝트 수정: <span th:text="${project.name}"></span></h1>

        <form th:action="@{/admin/project/update/{id}(id=${project.id})}" th:object="${project}" method="post" enctype="multipart/form-data">
            <div class="form-section">
                <h2>프로젝트 기본 정보</h2>
                <div class="form-group">
                    <label>대표 이미지 (썸네일)</label>
                    <input type="file" name="thumbnailImage">
                    <p>현재 썸네일: <img th:src="*{thumbnailUrl}" alt="썸네일" width="150"></p>
                </div>
                <div class="form-group">
                    <label>프로젝트명</label>
                    <input type="text" th:field="*{name}" required>
                </div>
                <div class="form-group">
                    <label>기간</label>
                    <input type="text" th:field="*{period}" required>
                </div>
                <div class="form-group">
                    <label>한 줄 요약</label>
                    <input type="text" th:field="*{description}">
                </div>
                <div class="form-group">
                    <label>기술 스택</label>
                    <input type="text" th:field="*{techStack}">
                </div>
                 <div class="form-group">
                    <label>프로젝트 URL</label>
                    <input type="text" th:field="*{projectUrl}">
                </div>
                 <div class="form-group">
                    <label>팀 정보</label>
                    <input type="text" th:field="*{teamInfo}">
                </div>
            </div>
            <button type="submit" class="submit-btn">기본 정보 저장</button>
        </form>

        <hr class="section-divider">

        <div class="form-section">
            <h2>프로젝트 상세 정보</h2>
            <div th:if="${#lists.isEmpty(project.details)}">
                <p>추가된 상세 정보가 없습니다.</p>
            </div>
            <div th:each="detail : ${project.details}" class="item-card">
                <img th:src="${detail.imageUrl}" width="100" style="margin-right: 15px;">
                <p th:text="${detail.description}" style="flex-grow: 1;"></p>
                <a th:href="@{/admin/project/detail/delete/{id}(id=${detail.id})}"
                   onclick="return confirm('이 항목을 삭제하시겠습니까?');">삭제</a>
            </div>

            <hr class="section-divider">

            <h3>새로운 상세 정보 추가</h3>
            <form th:action="@{/admin/project/{projectId}/addDetail(projectId=${project.id})}" method="post" enctype="multipart/form-data">
                <div class="form-group">
                    <label>상세 이미지</label>
                    <input type="file" name="detailImage" required>
                </div>
                <div class="form-group">
                    <label>이미지 설명</label>
                    <textarea name="description" rows="4" required></textarea>
                </div>
                <button type="submit" class="submit-btn">상세 정보 추가</button>
            </form>
        </div>

        <a href="/admin" style="display: inline-block; margin-top: 20px;">관리자 메인으로 돌아가기</a>
    </div>
</body>
</html>