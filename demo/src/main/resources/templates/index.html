<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${portfolio.name} + ' | 포트폴리오'"></title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"/>
</head>
<body>

    <nav class="main-nav">
        <div class="nav-container">
            <a class="nav-brand" href="#">SONGJOONHOI's Portfolio</a>
            <div class="nav-links">
                <a href="#about-me">About Me</a>
                <a href="#skills">Skills</a>
                <a href="#projects">Projects</a>
                <a href="#career">Career</a>
                <a th:href="@{/login}" sec:authorize="isAnonymous()">로그인</a>
                <span sec:authorize="isAuthenticated()">
                    <a th:href="@{/admin}">관리자</a>
                    <a th:href="@{/logout}">로그아웃</a>
                </span>
                
            </div>
        </div>
    </nav>

    <header class="hero">
        <div class="hero-content">
            <h1 th:text="'- ' + ${portfolio.name} + ' -'">- 송준회 -</h1>
            <h2>백엔드 개발자 포트폴리오</h2>
            <p>안녕하세요. 본질에 집중하는 백엔드 개발자 송준회입니다.</p>
            <a href="#about-me" class="hero-button">더 알아보기 <i class="fa-solid fa-arrow-down"></i></a>
        </div>
    </header>

    <main id="about-me" class="content-wrapper">
        <div class="left-column">
            <img th:src="${portfolio.profileImageUrl}" alt="프로필 사진" class="profile-picture">
            <h2 class="name-signature" th:text="${portfolio.name}">송준회</h2>
            <p class="philosophy-text" th:text="${portfolio.philosophy}"></p>
        </div>
        <div class="right-column">
            <div class="info-grid">
                <div class="info-block">
                    <h3>ABOUT ME</h3>
                    <p><strong>Name:</strong> <span th:text="${portfolio.name}"></span></p>
                    <p><strong>Birth:</strong> <span th:text="${portfolio.birth}"></span></p>
                    <p><strong>Contact:</strong></p>
                    <ul>
                        <li th:text="'📧 ' + ${portfolio.email}"></li>
                        <li th:text="'📞 ' + ${portfolio.phone}"></li>
                        <li><a th:href="${portfolio.githubUrl}" target="_blank">💻 Github</a></li>
                    </ul>
                </div>
                <div id="career" class="info-block">
                    <h3>ACTIVITY</h3>
                    <div th:each="car : ${portfolio.careers}">
                        <p><strong th:text="${car.period}"></strong> <br> <span th:text="${car.company} + ' - ' + ${car.position}"></span></p>
                    </div>
                </div>
                <div class="info-block">
                    <h3>EDUCATION</h3>
                    <div th:each="edu : ${portfolio.educations}" class="education-item">
                         <p>
                             <strong th:text="${edu.period}"></strong> <br>
                             <span th:text="${edu.institution} + ' - ' + ${edu.course}"></span>
                         </p>
                         <p th:if="${edu.description != null and !edu.description.isEmpty()}"
                            th:text="${edu.description}"
                            class="description">
                         </p>
                    </div>
                </div>
                <div class="info-block">
                    <h3>LICENSE</h3>
                     <div th:each="cert : ${portfolio.certifications}">
                         <p><strong th:text="${cert.acquisitionDate}"></strong> <br> <span th:text="${cert.name}"></span></p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <div class="additional-sections-wrapper">
        <section id="skills" class="skills">
            <h2>SKILLS</h2>
            <div class="skill-container">
                <div class="skill-category-block" th:each="entry : ${portfolio.skillsByCategory}">
                    <h3 class="skill-category-title" th:text="${entry.key}"></h3>
                    <div class="skill-tags">
                        <span class="skill-tag" th:each="skill : ${entry.value}" th:text="${skill.name}"></span>
                    </div>
                </div>
            </div>
        </section>

        <section id="projects" class="projects">
            <h2>PROJECTS</h2>
            <div class="project-grid">
                <div class="project-card" th:each="project, iterStat : ${portfolio.projects}"
                     th:data-name="${project.name}"
                     th:data-period="${project.period}"
                     th:data-tech="${project.techStack}"
                     th:data-url="${project.projectUrl}"
                     th:data-details-id="'project-details-' + ${iterStat.count}">
                    
                    <img th:src="${project.thumbnailUrl}" alt="프로젝트 썸네일" class="project-thumbnail">
                    <div class="project-card-content">
                        <h3 th:text="${project.name}"></h3>
                        <p class="period" th:text="${project.period}"></p>
                        <p class="desc" th:text="${project.description}"></p>
                    </div>

                    <div th:id="'project-details-' + ${iterStat.count}" style="display: none;">
                        <div th:each="detail : ${project.details}" class="detail-item-source">
                            <img th:src="${detail.imageUrl}" alt="상세 이미지">
                            <p th:text="${detail.description}"></p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <div id="project-modal" class="modal-overlay">
        <div class="modal-content">
            <button class="modal-close-button">&times;</button>
            <h3 id="modal-name"></h3>
            <p id="modal-period"></p>
            <hr>
            
            <div id="modal-details-container"></div>
            
            <hr>
            <p><strong>Tech Stack:</strong> <span id="modal-tech"></span></p>
            <a id="modal-url" href="#" target="_blank">프로젝트 링크 바로가기</a>
        </div>
    </div>
    
    <script src="/js/script.js"></script>
</body>
</html>